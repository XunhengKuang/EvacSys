{"ast":null,"code":"import knowledge from \"@/views/manager/Knowledge.vue\";\nexport default {\n  name: 'Home',\n  computed: {\n    knowledge() {\n      return knowledge;\n    }\n  },\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      notices: [],\n      knowledgeList: [],\n      pageNum: 1,\n      pageSize: 5,\n      total: 0\n    };\n  },\n  created() {\n    this.$request.get('/notice/selectAll').then(res => {\n      this.notices = res.data || [];\n    });\n    this.load(1);\n  },\n  methods: {\n    load(pageNum) {\n      // 分页查询\n      if (pageNum) this.pageNum = pageNum;\n      this.$request.get('/knowledge/selectPage', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize\n        }\n      }).then(res => {\n        if (res.code === '200') {\n          this.knowledgeList = res.data?.list;\n          this.total = res.data?.total;\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    handleCurrentChange(pageNum) {\n      this.load(pageNum);\n    }\n  }\n};","map":{"version":3,"names":["knowledge","name","computed","data","user","JSON","parse","localStorage","getItem","notices","knowledgeList","pageNum","pageSize","total","created","$request","get","then","res","load","methods","params","code","list","$message","error","msg","handleCurrentChange"],"sources":["src/views/manager/Home.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"card\" style=\"padding: 15px\">\n      您好，{{ user?.name }}！欢迎使用本系统\n      <el-button type=\"danger\" size=\"medium\" style=\"margin-left: 10px\" @click=\"$router.push('/help')\">我要救援</el-button>\n    </div>\n    <div style=\"display: flex; margin: 10px 0;grid-gap: 10px\">\n      <div class=\"card\" style=\"flex: 1\">\n        <div style=\"margin-bottom: 30px; font-size: 20px; font-weight: bold\">救援科普</div>\n        <div v-for=\"item in knowledgeList\" :key=\"item.id\" style=\"margin-bottom: 10px\">\n          <div><span style=\" font-size: 18px;cursor: pointer\" @click=\"$router.push('/knowledgeDetail?id='+item.id)\">{{item.title}}</span><span style=\"color:#666;margin-left: 20px;font-size: 12px\">{{item.date}}</span></div>\n        </div>\n        <div style=\"margin: 20px 0\" v-if=\"total>pageSize\">\n          <el-pagination\n              @current-change=\"handleCurrentChange\"\n              :current-page=\"pageNum\"\n              :page-sizes=\"[5, 10, 20]\"\n              :page-size=\"pageSize\"\n              layout=\"prev, pager, next\"\n              :total=\"total\">\n          </el-pagination>\n        </div>\n      </div>\n      <div style=\"width: 50%;flex: 1\" class=\"card\">\n        <div style=\"margin-bottom: 30px; font-size: 20px; font-weight: bold\">公告列表</div>\n        <div >\n          <el-timeline  reverse slot=\"reference\">\n            <el-timeline-item v-for=\"item in notices\" :key=\"item.id\" :timestamp=\"item.time\">\n              <el-popover\n                  placement=\"right\"\n                  width=\"200\"\n                  trigger=\"hover\"\n                  :content=\"item.content\">\n                <span slot=\"reference\">{{ item.title }}</span>\n              </el-popover>\n            </el-timeline-item>\n          </el-timeline>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport knowledge from \"@/views/manager/Knowledge.vue\";\n\nexport default {\n  name: 'Home',\n  computed: {\n    knowledge() {\n      return knowledge\n    }\n  },\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      notices: [],\n      knowledgeList:[],\n      pageNum:1,\n      pageSize:5,\n      total:0\n    }\n  },\n  created() {\n    this.$request.get('/notice/selectAll').then(res => {\n      this.notices = res.data || []\n    })\n    this.load(1)\n  },\n  methods:{\n    load(pageNum) {  // 分页查询\n      if (pageNum) this.pageNum = pageNum\n      this.$request.get('/knowledge/selectPage', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n        }\n      }).then(res => {\n        if (res.code === '200') {\n          this.knowledgeList = res.data?.list\n          this.total = res.data?.total\n        } else {\n          this.$message.error(res.msg)\n        }\n      })\n    },\n    handleCurrentChange(pageNum) {\n      this.load(pageNum)\n    },\n  }\n}\n</script>\n"],"mappings":"AA6CA,OAAAA,SAAA;AAEA;EACAC,IAAA;EACAC,QAAA;IACAF,UAAA;MACA,OAAAA,SAAA;IACA;EACA;EACAG,KAAA;IACA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,OAAA;MACAC,aAAA;MACAC,OAAA;MACAC,QAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,QAAA,CAAAC,GAAA,sBAAAC,IAAA,CAAAC,GAAA;MACA,KAAAT,OAAA,GAAAS,GAAA,CAAAf,IAAA;IACA;IACA,KAAAgB,IAAA;EACA;EACAC,OAAA;IACAD,KAAAR,OAAA;MAAA;MACA,IAAAA,OAAA,OAAAA,OAAA,GAAAA,OAAA;MACA,KAAAI,QAAA,CAAAC,GAAA;QACAK,MAAA;UACAV,OAAA,OAAAA,OAAA;UACAC,QAAA,OAAAA;QACA;MACA,GAAAK,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAI,IAAA;UACA,KAAAZ,aAAA,GAAAQ,GAAA,CAAAf,IAAA,EAAAoB,IAAA;UACA,KAAAV,KAAA,GAAAK,GAAA,CAAAf,IAAA,EAAAU,KAAA;QACA;UACA,KAAAW,QAAA,CAAAC,KAAA,CAAAP,GAAA,CAAAQ,GAAA;QACA;MACA;IACA;IACAC,oBAAAhB,OAAA;MACA,KAAAQ,IAAA,CAAAR,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}